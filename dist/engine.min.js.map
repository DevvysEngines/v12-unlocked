{"version":3,"file":"engine.min.js","sources":["../engine/internal/canvas.js","../engine/utilities/internal/math.js","../engine/utilities/internal/camera.js","../engine/utilities/internal/paths.js","../engine/utilities/utils.js","../engine/utilities/internal/render.js","../engine/events/events.js","../engine/internal/chunk.js","../engine/internal/camera.js","../engine/internal/scene.js","../engine/internal/frame.js","../engine/internal/types.js","../engine/systems/v9/utilities.js","../engine/systems/v9/module/internal/base_module.js","../engine/systems/v9/module/module.js","../engine/systems/v9/module/internal/script_handler.js","../engine/element/internal/baseElement.js","../engine/element/element.js","../engine/element/internal/scriptHandler.js","../engine/element/internal/dimeHandler.js","../engine/element/internal/getExtension.js","../engine/classes/entity.js","../engine/events/eventNode.js","../engine/presets/internal/system_presets.js","../engine/internal/node.js","../engine/presets/internal/mouse.js","../engine/presets/internal/effect.js","../engine/presets/internal/linkHitboxToRenderer.js","../engine/systems/v9/script.js","../engine/presets/internal/scripts/internal/event.js","../engine/presets/internal/scripts/internal/update.js","../engine/presets/internal/scripts/script.js","../engine/presets/presets.js","../engine/engine.js","../engine/internal/game.js"],"sourcesContent":["export class Canvas{\n    constructor(){\n        this.canvas = document.createElement(`canvas`);\n        this.canvas.style.position = `fixed`;\n        this.canvas.width = window.innerWidth;\n        this.canvas.height = window.innerHeight;\n        this.canvas.style.left = 0;\n        this.canvas.style.top = 0;\n        this.ctx = this.canvas.getContext(`2d`);\n        this.ctx.textAlign = `center`;\n        document.body.insertBefore(this.canvas,document.body.childNodes[0]);\n    }\n}","export function toradians(degrees){\n    return (Math.PI/180)*degrees;\n}\nexport function distance(x1,y1,x2,y2){\n    return (Math.sqrt(((x2-x1)*(x2-x1))+((y2-y1)*(y2-y1))));\n}\nexport function rotatepoint(x=0,y=0,rotation=0,xorigin=0,yorigin=0){\n    rotation = toradians(rotation);\n    x-=xorigin;\n    y-=yorigin;\n    let newpos = {\n        x: x*Math.cos(rotation)-y*Math.sin(rotation)\n        ,y: x*Math.sin(rotation)+y*Math.cos(rotation)\n    };\n    newpos.x+=xorigin;\n    newpos.y+=yorigin;\n    return newpos;\n}\nexport function tosec(value){\n    return (value/1000*60)\n}","import { game } from \"../../engine.js\";\n\nexport function aroundChunk(fn=()=>{},x,y,ts){\n    const camera = game.currentscene.camera;\n    x = x ?? camera.chunk.x;\n    y = y ?? camera.chunk.y;\n    ts = ts ?? camera.show;\n    for (let i = ts.width; i>=-ts.width; i--){\n        //if (game.currentscene.ifChunk(x-i,y)){\n            for (let v = ts.height; v>=-ts.height; v--){\n                //console.log(game.currentscene.ifChunk(x-i,y-v))\n                if (game.currentscene.ifChunk(x-i,y-v)){\n                    //console.log(i,v,game.currentscene.giveChunk(x-i,y-v),game.currentscene.ifChunk(x-i,y-v))\n                    fn({\n                        chunk: game.currentscene.giveChunk(x-i,y-v)\n                        ,i\n                        ,v\n                        ,game\n                    })\n                }\n            }\n        //}\n    }\n}\n\nexport function tomap(x,y){\n    const camera = game.currentscene.camera\n    const window = game.window;\n    return {\n        x: (x-camera.x)/camera.zoom+window.width/2\n        ,y: (y-camera.y)/camera.zoom+window.height/2\n    };\n};\n\nexport function unmap(x,y){\n    const camera = game.currentscene.camera;\n    const window = game.window;\n    return {\n        x: (x)*camera.zoom-window.width/2*camera.zoom+camera.x\n        ,y: (y)*camera.zoom-window.height/2*camera.zoom+camera.y\n    }\n}","export function normalizePath(path){\n    let newpath = [];\n    if (!Array.isArray(path))path=[path];\n    //let jPath = path.join(`,`);\n    //let cPath = cachedPaths[jPath];\n    //if (cPath)return cPath;\n    path.forEach((newstr)=>{\n        if (typeof newstr == `string`)\n        {\n            /*\n            newstr = newstr.replaceAll(`.`, `/`);\n            newstr = newstr.replaceAll(`[`, `/`);\n            newstr = newstr.replaceAll(`]`, ``);\n            newstr = newstr.split(`/`);\n            */\n            newstr = newstr.split(/[.\\[\\]\\/]+/).filter(s => s.length);\n            newpath.push(...newstr);\n        } else {\n            newpath.push(newstr);\n        }\n    })\n    //console.log(newpath, jPath, path)\n    //cachedPaths[jPath] = newpath;\n    return [...newpath];\n}","import * as math from \"./internal/math.js\";\nimport * as camera from \"./internal/camera.js\";\nimport * as paths from \"./internal/paths.js\";\nimport * as render from \"./internal/render.js\";\n\nexport const utils = {\n    ...math,\n    ...render,\n    ...camera,\n    ...paths\n};\n","import { game } from \"../../engine.js\";\n\nexport function giveColorWithTables(color,transparency){\n    return `${color[0]},${color[1]},${color[2]},${transparency}`;\n}\n\nexport function givefont(size=16,style=`sans-serif`,type=``){\n    return (`${style} ${size}px ${type}`); // bold ${13/(game.hud ? 1:camera.zoom)}px sans-serif\n}\n\nexport function measureText(text,renderer){\n    game.ctx.font = utils.givefont(renderer.fontsize,renderer.fonttype,renderer.fontstyle);\n    return game.ctx.measureText(text).width\n}","import { game } from \"../engine.js\";\nimport { utils } from \"../utilities/utils.js\";\n\nexport class events{\n    constructor(){\n        window.addEventListener(`resize`,events.resize);\n        window.addEventListener(`keydown`,events.keyboard);\n        window.addEventListener(`mousemove`,events.mousemove);\n        window.addEventListener(`mousedown`,events.mousedown);\n        window.addEventListener(`mouseup`,events.mouseup);\n        window.addEventListener(`contextmenu`,events.preventRight);\n    }\n    static preventRight(event){\n        event.preventDefault();\n    }\n    static resize(){\n        game.canvas.width = game.window.width = window.innerWidth;\n        game.window.height = game.canvas.height = window.innerHeight;\n        game.ctx.textAlign = `center`;\n    };\n    static keyboard(info){\n        //\n        switch(info.key){\n            case `w`:\n                game.currentscene.camera.y-=5;\n                break;\n            case `a`:\n                game.currentscene.camera.x-=5;\n                break;\n            case `s`:\n                game.currentscene.camera.y+=5;\n                break;\n            case `d`:\n                game.currentscene.camera.x+=5;\n                break;\n            case `e`:\n                game.currentscene.camera.zoom+=1/4;\n                break;\n            case `q`:\n                game.currentscene.camera.zoom-=1/4;\n                break;\n        }\n                //\n                \n        events.mousemove();\n    }\n    static mousemove(info=game.mouse){\n        game.mouse.x = info.x;\n        game.mouse.y = info.y;\n        let isover = false;\n        for (let v in Object.values(game.currentscene.uiList)){\n            if (v.ifover(info.x,info.y)){\n                v.set(`mouse/over`,true);\n                isover = true;\n            } else if (v.get(`mouse/over`)==true){\n                v.set(`mouse/over`,false);\n            }\n        }\n        info = utils.unmap(info.x,info.y);\n        game.mouse.filteredX = info.x;\n        game.mouse.filteredY = info.y;\n        utils.aroundChunk((c_info)=>{\n            Object.values(c_info.chunk.mouseElements).forEach((v)=>{\n                if (v.ifover(info.x,info.y)){\n                    v.set(`mouse/over`,true);\n                    isover = true;\n                } else if (v.get(`mouse/over`)==true){\n                    v.set(`mouse/over`,false);\n                }\n            })\n        })\n        if (isover){\n            document.body.style.cursor = `pointer`;\n        } else {\n            document.body.style.cursor = `default`;\n        }\n        game.mouse.isover = isover;\n    }\n    static mousedown(info){\n        let lor = info.button == 0 ? `left`: info.button==1 ? `middle`:`right`;\n        if (lor==`middle`)info.preventDefault();\n        for (let v in Object.values(game.currentscene.uiList)){\n            if (v.ifover(info.x,info.y)){\n                v.set(`mouse/${lor}/down`,true);\n                v.set(`mouse/${lor}/dragging`,true);\n            }\n        }\n        info = utils.unmap(info.x,info.y);\n        utils.aroundChunk((c_info)=>{\n            Object.values(c_info.chunk.mouseElements).forEach((v)=>{\n                if (v.ifover(info.x,info.y)){\n                    v.set(`mouse/${lor}/down`,true);\n                    v.set(`mouse/${lor}/dragging`,true);\n                }\n            })\n        })\n    }\n    static mouseup(info){\n        let lor = info.button == 0 ? `left`: info.button==1 ? `middle`:`right`;\n        if (lor==`middle`)info.preventDefault();\n        for (let v in Object.values(game.currentscene.uiList)){\n            if (v.ifover(info.x,info.y)){\n                if (v.ifover(info.x,info.y)&&v.get(`mouse/${lor}/down`)==true){\n                    v.set(`mouse/${lor}/down`,false);\n                    v.set(`mouse/${lor}/dragging`, false);\n                } else if (v.get(`mouse/${lor}/down`)==true){\n                    v.system_set([`mouse`,lor,`down`],false);\n                    v.set(`mouse/${lor}/dragging`, false);\n                }\n            }\n        }\n        info = utils.unmap(info.x,info.y);\n        utils.aroundChunk((c_info)=>{\n            Object.values(c_info.chunk.mouseElements).forEach((v)=>{\n                if (v.ifover(info.x,info.y)&&v.get(`mouse/${lor}/down`)==true){\n                    v.set(`mouse/${lor}/down`,false);\n                    v.set(`mouse/${lor}/dragging`, false);\n                } else if (v.get(`mouse/${lor}/down`)==true){\n                    v.system_set([`mouse`,lor,`down`],false);\n                    v.set(`mouse/${lor}/dragging`, false);\n                }\n            })\n        })\n    }\n}","import { game } from \"../engine.js\";\nimport { utils } from \"../utilities/utils.js\";\n\nexport class chunk{\n    constructor(scene,x,y){\n        \n        this.pos = {x,y};\n        this.scene = scene;\n        this.x = this.pos.x*this.scene.chunkSize;\n        this.y = this.pos.y*this.scene.chunkSize;\n        this.mouseElements = {};\n        this.allElements = {};\n        this.elements = {};\n        this.renderChunk();\n    }\n    addElement(element){\n        //console.log(`${element.Name} is joining chunk ${this.pos.x},${this.pos.y}.`)\n        if (element.get(`properties/usesMouse`)){\n            this.mouseElements[element.id] = element;\n        }\n        element.set(`properties/chunk`,this.pos);\n        const color = element.color;\n        const id = element.id;\n        this.allElements[id] = element;\n        let colormap;\n        if (!this.elements[color]) this.elements[color] = {};\n        colormap = this.elements[color];\n        if (colormap[id])console.warn(`WARNING`);\n        colormap[id] = element;\n    }\n    removeElement(element){\n        //console.log(`${element.Name} is leaving chunk ${this.pos.x},${this.pos.y}.`)\n        if (this.mouseElements[element.id]){\n            delete this.mouseElements[element.id];\n        }\n        element.set(`properties/chunk`,{x:-1,y:-1});\n        const color = element.color;\n        const id = element.id;\n        delete this.allElements[id];\n        let colormap;\n        if (!this.elements[color])return;\n        colormap = this.elements[color];\n        delete colormap[id];\n        if (Object.keys(colormap).length<=0){\n            delete this.elements[color];\n        }\n    }\n    update(deltatime, delta){\n        Object.values(this.allElements).forEach((key)=>{\n            key.update(deltatime, delta);\n        })\n    }\n    render(ctx){\n        //this.renderChunk(ctx);\n        Object.keys(this.elements).forEach((key)=>{\n            //console.log(`rgb(${key})`)\n            ctx.fillStyle = `rgb(${key})`;\n            ctx.beginPath();\n            Object.values(this.elements[key]).forEach((element)=>{\n                element.render(ctx);\n                ctx.closePath();\n            })\n            ctx.fill()\n        })\n    }\n    renderChunk(ctx){\n        /*const tomappos = utils.tomap(this.x,this.y);\n        ctx.save();\n        ctx.translate(tomappos.x,tomappos.y);\n        ctx.fillRect(this.scene.chunkSize/2,this.scene.chunkSize/2,this.scene.chunkSize-5,this.scene.chunkSize-5)\n        ctx.restore();\n        */\n    }\n}","export class camera{\n    x=0;\n    y=0;\n    zoom=1;\n    rotation=0;\n    chunk={x:0,y:0};\n    show={width:5,height:5};\n    constructor(scene){\n        scene.addCamera(this);\n    }\n    update(){\n        const game = this.scene.game;\n        const chunk = game.currentscene.locateChunkByPos(this.x,this.y)\n        const chunkpos = {x:chunk.pos.x,y:chunk.pos.y};\n        const mychunkpos = this.chunk;\n        if (chunkpos.x!=mychunkpos.x||chunkpos.y!=mychunkpos.y){\n            this.chunk = chunkpos;\n            console.log(chunkpos);\n        }\n    }\n}","import { game } from \"../engine.js\";\nimport { chunk } from \"./chunk.js\";\nimport { camera } from \"./camera.js\";\nimport { utils } from \"../utilities/utils.js\";\n\nexport class scene{\n    constructor(Name){\n        this.Name = Name;\n        this.game = game;\n        this.chunks = {};\n        this.uiList = {};\n        this.chunkSize = 600;\n        this.addCamera(new camera(this));\n    }\n    ifChunk(x=0,y=0){\n        window.chunk = this\n        if (!this.chunks[`${x}`])return;\n        if (!this.chunks[`${x}`][`${y}`])return;\n        return true;\n    }\n    moveElementToChunk(element,newchunk){\n        element.chunk.removeElement(element);\n        newchunk.addElement(element);\n    }\n    giveChunk(x,y){\n        if (!this.ifChunk(x,y)){\n            this.insertChunk(x,y);\n        }\n        //console.log(this.ifChunk(x,y));\n        return this.chunks[`${x}`][`${y}`];\n    }\n    insertChunk(x,y){\n        if (this.ifChunk(x,y))console.warn(`STOP MAKING CHUNKS IN ${x},${y}`)\n        if (!this.chunks[`${x}`]);this.chunks[`${x}`]={};\n        this.chunks[`${x}`][`${y}`] = new chunk(this,x,y)\n    }\n    locateChunkByPos(x,y){\n        const newX = Math.floor(x/this.chunkSize);\n        const newY = Math.floor(y/this.chunkSize);\n        return this.giveChunk(newX,newY);\n    }\n    addElement(element){\n        if (element.get(`properties/ui`)){\n            element.setToUi();\n            return;\n        }\n        const chunk = this.locateChunkByPos(element.x,element.y);\n        if (!chunk)return;\n        chunk.addElement(element);\n    }\n    removeElement(element){\n        const chunk = element.chunk;\n        chunk.removeElement(element);\n    }\n    addCamera(camera){\n        this.camera = camera;\n        camera.scene = this;\n    }\n    render(ctx){\n        utils.aroundChunk((info)=>{\n            info.chunk.render(ctx);\n        })\n    }\n    update(deltatime){\n        const delta = deltatime*60/1000;\n        utils.aroundChunk((info)=>{\n            info.chunk.update(deltatime, delta);\n        })\n    }\n}","import { game } from \"../engine.js\"\n\nexport function frame(timestamp=0){\n    if (!game.time)game.time = timestamp;\n\n    const deltatime = timestamp - game.time;\n    game.time = timestamp;\n\n    //console.log(deltatime/1000*3600)\n\n    game.ctx.clearRect(0,0,game.window.width,game.window.height);\n\n    game.currentscene.update(deltatime);\n    for (let value in Object.values(game.currentscene.uiList)){\n        value.update(deltatime, deltatime*60/1000);\n    }\n\n    game.currentscene.render(game.ctx);\n\n    for (let value in Object.values(game.currentscene.uiList)){\n        game.ctx.beginPath();\n        game.ctx.fillStyle = `rgb(${value.color})`;\n        value.render(game.ctx);\n        game.ctx.fill();\n    }\n\n    requestAnimationFrame(frame);\n}","import { utils } from \"../utilities/utils.js\";\n\nexport class types{\n    static box = {\n        render: (ctx,dime)=>{\n            ctx.roundRect(-dime.width/2,-dime.height/2,dime.width,dime.height,0)\n            ctx.closePath();\n        }\n        ,ifover(x1,y1,hd){\n            let {x,y} = utils.rotatepoint(x1,y1,hd.rotation,hd.x,hd.y);\n            return (x>hd.x-hd.width/2&&x<hd.x+hd.width/2&&y<hd.y+hd.height/2&&y>hd.y-hd.height/2);\n        }\n    }\n    static arc = {\n        render: (ctx,dime)=>{\n            ctx.arc(0,0,dime.radius,0,2*Math.PI);\n            ctx.closePath();\n        }\n        ,ifover(x,y,hd){\n            return utils.distance(x,y,hd.x,hd.y)<hd.radius;\n        }\n    }\n    static txt = {\n        render: (ctx,dime,renderer)=>{\n            ctx.font = utils.givefont(dime.fontsize,renderer.fonttype,renderer.fontstyle)\n            ctx.fillText(renderer.string, 0, dime.fontsize/4)\n        }\n        ,ifover(x,y,hd,hb,element){\n            //x:hd.x,y:hd.y,width:element.textWidth,height:element.dime.fontsize\n            return types[`box`].ifover(x,y,hd);\n        }\n    }\n}","let idList = {};\n\nexport class utilities {\n    static generateId = function(length = 28){\n        const chars = `abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890-=+_|!@#$%^&*()`;\n        let result = ``;\n        for (let i=0; i<length-4; i++){\n            result+=chars.charAt(Math.floor(Math.random()*chars.length));\n        }\n        if (idList[result]){\n            console.log(`Damn lucky day! `, result);\n            result = utilities.generateId(length);\n        }\n        let gen = Math.floor(Math.random()*(result.length+1));\n        result = result.slice(0, gen) + 'gen-' + result.slice(gen);\n        idList[result] = true;\n        return result;\n    }\n    static normalize_path(...path){\n        let newpath = [];\n        path.forEach((part)=>{\n            switch(typeof part){\n                case `string`:\n                    newpath.push(\n                        ...part\n                            .replaceAll(`.`,`/`)\n                            .replaceAll(`[`,`/`)\n                            .replaceAll(`]`,``)\n                            .split(`/`)\n                    )\n                    break;\n                default:\n                    newpath.push(part);\n                    break;\n            }\n        })\n        return newpath;\n    }\n    static system_signal_converter(signal=`/`,type=`set`){\n        return `*v9$:$${type[0]}?{>${utilities.normalize_path(signal).join(`>`)}}*`;\n    }\n    static ctxUse(script,module,type){\n        return (...args)=>{\n            module.set_context(script);\n            let call = script.proto[type].call(module,...args);\n            module.remove_context();\n            if (typeof call != `object`)return;\n            Object.assign(script,call);\n        }\n    }\n}","import { utilities } from \"../../utilities.js\";\n\nexport class base_module{\n    #context = [];\n    #files = {\n        scripts_storage:{}\n        ,signals_storage:{}\n    };\n    get id(){\n        return this.#files[`id`];\n    }\n    get context(){\n        return this.#context[this.#context.length-1];\n    }\n    set_context(context){\n        return this.#context.push(context);\n    }\n    remove_context(){\n        return this.#context.pop();\n    }\n    system_set(path=[],value=0){\n        let current = this.#files\n        let oldValue;\n        for (let part = 0; part<path.length-1; part++){\n            if (typeof current[path[part]] != `object`)current[path[part]]={};\n            current = current[path[part]];\n        }\n        oldValue = current[path[path.length-1]];\n        current[path[path.length-1]] = value;\n        return [oldValue,value,...path];\n    }\n    system_delete(path=[]){\n        let current = this.#files\n        let oldValue;\n        for (let part = 0; part<path.length-1; part++){\n            if (typeof current[path[part]] != `object`)return [undefined,false,...path];\n            current = current[path[part]];\n        }\n        oldValue = current[path[path.length-1]];\n        delete current[path[path.length-1]];\n        return [oldValue,true,...path];\n    }\n    system_get(path=[]){\n        let current = this.#files\n        for (let part = 0; part<path.length-1; part++){\n            if (typeof current[path[part]] != `object`)return;\n            current = current[path[part]];\n        }\n        return current[path[path.length-1]];\n    }\n    set(...path){\n        let value = path.pop();\n        let normalized_path = utilities.normalize_path(...path);\n        let change = this.system_set(normalized_path,value);\n        if (change[0]==value)return;\n        let newpath = ``;\n        this.emit(`*v9$:$s?{>>}*`,change);\n        normalized_path.forEach((part)=>{\n            newpath+=`>${part}`;\n            this.emit(`*v9$:$s?{${newpath}>}*`,change);\n        })\n        this.emit(`*v9$:$s?{${newpath}}*`,change);\n    }\n    get(...path){\n        return this.system_get(utilities.normalize_path(...path));\n    }\n    delete(...path){\n        let normalized_path = utilities.normalize_path(...path);\n        let change = this.system_delete(normalized_path);\n        if (!change[1])return;\n        let newpath = ``;\n        this.emit(`*v9$:$d?{>>}*`,change);\n        normalized_path.forEach((part)=>{\n            newpath+=`>${part}`;\n            this.emit(`*v9$:$d?{${newpath}>}*`,change)\n        })\n        this.emit(`*v9$:$d?{${newpath}}`,change);\n    }\n    constructor(config,...scripts){\n        Object.assign(this.#files,config,{scripts_storage:{},signals_storage:{},id:utilities.generateId()});\n        scripts.forEach((script)=>{\n            this.insert(...script);\n        })\n    }\n}","import { base_module } from \"./internal/base_module.js\";\nimport { script_handler } from \"./internal/script_handler.js\";\n\nexport class module extends script_handler(base_module){};","import { utilities } from \"../../utilities.js\";\n\n\nexport function script_handler(sCls)\n{\n    return class extends sCls \n    {\n        insert\n        (\n            script\n            ,...args\n        )\n        {\n            let stored_script = \n            {\n                id: utilities.generateId()\n                ,info:args\n                ,proto: script\n            }\n            stored_script.run = utilities.ctxUse\n            (\n                stored_script\n                ,this\n                ,`fired`\n            );\n            this.set\n            (\n                `scripts_storage/${stored_script.id}`\n                ,stored_script\n            );\n            this.set\n            (\n                `signals_storage/${stored_script.proto.signal}/${stored_script.id}`\n                ,true\n            );\n            return stored_script.id;\n        }\n        remove\n        (script=this.context)\n        {\n            if (typeof script == `string`)script = this.script(script);\n            this.set();\n        }\n        script\n        (id=this.context.id)\n        {\n            return this.system_get\n            (\n                [\n                    `scripts_storage`\n                    ,id\n                ]\n            );\n        }\n        emit\n        (signal,...args)\n        {\n            /*console.log(\n                `%cEmit from '%c${this.id}%c': %c${signal}`\n                ,\"color: pink\"\n                ,\"color: yellow\"\n                ,\"color: pink\"\n                ,\"color: orange\"\n            );*/\n            let scripts = this.system_get\n            (\n                [\n                    `signals_storage`\n                    ,signal\n                ]\n            );\n            if (!scripts)return;\n            Object.keys(scripts).forEach((id)=>\n            {\n                let script = this.script(id);\n                script.run\n                (\n                    ...args,\n                    ...script.info\n                );\n            })\n        }\n    }\n}","import { game } from \"../../engine.js\";\nimport { types } from \"../../internal/types.js\"\nimport { utils } from \"../../utilities/utils.js\";\nimport { module } from \"../../systems/v9/module/module.js\";\n\nconst FILE_VALUE_DEFAULTS = \n{\n    properties:\n    {\n        x:0\n        ,y:0\n        ,chunk:{x:0,y:0}\n        ,ui: false\n        ,inUi: false\n    }\n    ,renderer:\n    {\n        type:`box`\n        ,x:0\n        ,y:0\n        ,width:30\n        ,height:30\n        ,radius:15\n        ,string: `String`\n        ,fonttype: `bold`\n        ,fontstyle: `sans-serif`\n        ,fontsize: 20\n        ,roundedness:0\n        ,color:[0,0,0]\n        ,rotation:0\n        ,transparency: 1\n    }\n    ,hitbox:\n    {\n        type:`box`\n        ,x:0\n        ,y:0\n        ,rotation:0\n        ,width:30\n        ,height:30\n        ,radius:15\n    }\n    ,reactions: {}\n    ,reactionsList: {}\n    ,nodes: {}\n    ,mouse: \n    {\n        over:false\n        ,left:{\n            over:false\n            ,dragging:false\n        }\n        ,right:{\n            over:false\n            ,dragging:false\n        }\n        ,middle:{\n            over:false\n            ,dragging:false\n        }\n    }\n}\n\nexport class baseElement extends module {\n\n    // FUNCTIONS\n\n    update // Sends out an emit for frame updates, used by nodes, or scripts with the signal.\n    (...args)\n    {\n        this.emit(\"-u$u\",...args)\n    }\n\n    render // currently renders the element, soon to be changed to an emit signal, and then this rendering will be added to a system preset\n    (ctx)\n    {\n        const dime = this.dime;\n        \n        ctx.save();\n        ctx.translate(dime.x, dime.y);\n\n        const rend = this.system_get([`renderer`]);\n\n        types[rend.type].render(ctx, dime, rend);\n        ctx.restore();\n    }\n    \n    has // Uses system_has function in baseElement to check if some value exists in files\n    (...path)\n    {\n        return this.system_has(utils.normalizePath(path));\n    }\n\n    system_has // Uses system_get in module to check if some value exists in files\n    (path)\n    {\n        return this.system_get(path)!==undefined\n    }\n\n    // CONSTRUCTURE\n\n    constructor\n    (\n        properties = {}\n        ,renderer = {}\n        ,hitbox = {}\n        ,...scripts\n    )\n    {\n        // Makes a clone so that no default value references are shared between 2 elements\n        const deep_cloned_defaults = structuredClone(FILE_VALUE_DEFAULTS);\n\n        // Assigns user values to properties, renderer, and hitbox files and then making sure the defaults are applied.\n        deep_cloned_defaults.properties = \n        {\n            ...deep_cloned_defaults.properties\n            ,...properties\n        }\n        deep_cloned_defaults.renderer = \n        {\n            ...deep_cloned_defaults.renderer\n            ,...renderer\n        }\n        deep_cloned_defaults.hitbox = \n        {\n            ...deep_cloned_defaults.hitbox\n            ,...hitbox\n        }\n        \n        // Calling for module to assign the new main files to the current module/element.\n        super\n        (\n            deep_cloned_defaults\n        );\n\n        if \n        (scripts.length<1)\n        return;\n\n        let possible_initilization = scripts.pop()\n\n        if \n        (typeof possible_initilization != `function`)\n        {\n            scripts.push(possible_initilization);\n            possible_initilization = false;\n        }\n\n        this.use\n        (...scripts);\n\n        if \n        (possible_initilization)\n        {\n            possible_initilization.call(this);\n        }\n    }\n}\n\n\n\n\n\n\n/*\nexport class baseElement{\n    #scopes = {\n        \"properties\": {\n            x:0\n            ,y:0\n            ,id:null\n            ,chunk:{x:0,y:0}\n            ,ui: false\n            ,inUi: false\n            ,Name: `No Name`\n        }\n        ,\"renderer\": {\n            type:`box`\n            ,x:0\n            ,y:0\n            ,width:30\n            ,height:30\n            ,radius:15\n            ,string: `String`\n            ,fonttype: `bold`\n            ,fontstyle: `sans-serif`\n            ,fontsize: 20\n            ,roundedness:0\n            ,color:[0,0,0]\n            ,rotation:0\n            ,transparency: 1\n        }\n        ,\"reactions\": {}\n        ,\"reactionsList\": {}\n        ,\"script_storage\": {}\n        ,\"signals_storage\": {}\n        ,\"hitbox\": {\n            type:`box`\n            ,x:0\n            ,y:0\n            ,rotation:0\n            ,width:30\n            ,height:30\n            ,radius:15\n        }\n        ,\"nodes\": {}\n        ,\"mouse\": {\n            over:false\n            ,left:{\n                over:false\n                ,dragging:false\n            }\n            ,right:{\n                over:false\n                ,dragging:false\n            }\n            ,middle:{\n                over:false\n                ,dragging:false\n            }\n        }\n    }\n    isElement=true;\n    isDestroyed=false;\n    #nodeStack=[];\n    #internal_setup(){\n        let r = this.#scopes[`renderer`];\n        let p = this.#scopes[`properties`];\n        let h = this.#scopes[`hitbox`];\n\n        if (!types[r.type]){\n            console.warn(`${r.type} is not a valid rendering type for '${this.Name}'.(SYSTEM WARNING)`)\n            r.type = `box`;\n        }\n        if (!types[h.type]){\n            console.warn(`${h.type} is not a valid hitbox type for '${this.Name}'.(SYSTEM WARNING)`)\n            h.type = `box`;\n        }\n        if (r.type==`txt`){\n            this.set(`renderer/width`,this.Width);\n            this.set(`renderer/height`,this.dime.fontsize);\n        }\n    }\n    get scopes(){\n        return JSON.parse(JSON.stringify({...this.#scopes}));\n    }\n    get currentNode(){\n        return this.#nodeStack[this.#nodeStack.length-1];\n    }\n    get linked(){\n        if (!this.currentNode)return;\n        if (!this.currentNode.linked)return [];\n        return Object.keys(this.currentNode.linked);\n    }\n    get secondaryNode(){\n        if (!this.currentNode)return;\n        let link = this.linked[0];\n        if (!link) return;\n        return this.anyNodeById(link);\n    }\n    system_set_currentNode(node){\n        this.#nodeStack[this.#nodeStack.length] = node;\n    }\n    set_context(script){\n        this.#nodeStack[this.#nodeStack.length] = script;\n    }\n    remove_context(){\n        this.#nodeStack.pop();\n    }\n    system_remove_currentNode(){\n        this.#nodeStack.pop();\n    }\n    get textWidth(){\n        let dime = this.dime;\n        let renderer = this.#scopes[`renderer`];\n        game.ctx.font = utils.givefont(dime.fontsize,renderer.fonttype,renderer.fontstyle)\n        return game.ctx.measureText(renderer.string).width*game.currentscene.camera.zoom\n    }\n    get Name(){\n        return this.#scopes[`properties`].Name;\n    }\n    get x(){\n        return this.#scopes[`properties`].x;\n    }\n    get y(){\n        return this.#scopes[`properties`].y;\n    }\n    get color(){\n        return utils.giveColorWithTables(this.#scopes[`renderer`].color,this.#scopes[`renderer`].transparency);\n    }\n    get chunk(){\n        let c = this.#scopes[`properties`].chunk;\n        return game.currentscene.giveChunk(c.x,c.y);\n    }\n    get id(){\n        return this.#scopes[`properties`].id\n    }\n    get getInfo(){\n        return {\n            color: this.color\n            ,id: this.id\n            ,chunk: this.chunk\n        }\n    }\n    ifover(x,y){\n        let hd = this.hitboxDime;\n        return types[this.#scopes[`hitbox`].type].ifover(x,y,hd,this.#scopes[`hitbox`],this);\n    }\n    #setScope(scope,startingVal){\n        if (this.#scopes[scope]){\n            console.warn(`${scope} is already a scope for ${this.Name}.`);\n            return;\n        }\n        this.#scopes[scope] =  startingVal;\n    }\n    render(ctx){\n        if (this.isDestroyed) return;\n        const dime = this.dime;\n        \n        ctx.save();\n        ctx.translate(dime.x, dime.y);\n\n        types[this.#scopes[`renderer`].type].render(ctx, dime, this.#scopes[`renderer`]);\n        ctx.restore();\n    }\n    get(...path){\n        path = utils.normalizePath(path);\n        return this.system_get(path);\n    }\n    set(...path){\n        let val = path.pop();\n        path = utils.normalizePath(path);\n        //console.log(`is a safe one`)\n        let [value,oldvalue,centeral,...newpath] = this.system_set(path,val);\n        path = newpath;\n        if (oldvalue==value)return;\n        let events = this.get(\"reactions\",centeral,...path,\"events\");\n        if (!events)return;\n        for (let e in events)\n        {\n            let event = events[e];\n            if (!event.active)continue;\n            if (!event.checkNode(oldvalue,value))continue;\n            let da = event.runNode([oldvalue,value],...event.info);\n            if (da)Object.assign(event,da);\n            if (!event.node.triggerTimes)continue;\n            event.node.triggerTimes--;\n            if (event.node.triggerTimes>0)continue;\n            this.deleteEventNode(event);\n        }\n    }\n    has(...path){\n        return this.system_has(utils.normalizePath(path));\n    }\n    delete(...path){\n        path = utils.normalizePath(path);\n        let centeral = path.shift();\n        let current = this.#scopes[centeral];\n        if (!current)return;\n        for (let i = 0; i<path.length-1; i++){\n            if (current[path[i]]===undefined)return false;\n            current = current[path[i]];\n        }\n        delete current[path[path.length-1]];\n    }\n    system_set(path,value){\n        let oldvalue;\n        path = [...path];\n        let centeral = path.shift();\n        let current = this.#scopes[centeral]\n        if (!current){\n            this.#setScope(centeral, value);\n            current = this.#scopes[centeral];\n            if (path.length<=0)return [value,undefined,centeral];\n        }\n        for (let i = 0; i<path.length-1; i++){\n            if (typeof current[path[i]] !== 'object' || current[path[i]] === null) {\n                current[path[i]] = {};\n            }\n            current = current[path[i]];\n        }\n        oldvalue = current[path[path.length-1]];\n        //console.log(path[path.length-1]);\n        current[path[path.length-1]] = value;\n        return [value, oldvalue, centeral, ...path];\n    }\n    system_get(path){\n        let centeral = path.shift();\n        let current = this.#scopes[centeral]\n        for (let i in path){\n            if (current[path[i]]===undefined)return undefined;\n            current = current[path[i]];\n        }\n        return current;\n    }\n    system_has(path){\n        return this.system_get(path)!==undefined\n    }\n    destroy(){\n        game.removeElement(this);\n        this.isDestroyed=true\n        this.customdestroy()\n        \n        this.#scopes[`reactionsList`] = {};\n        this.#scopes[`reactions`] = {};\n        this.#scopes[`nodes`] = {};\n\n        for (let i in this){\n            //this[i] = undefined;\n        }\n    }\n    batchSet(...paths){\n        paths.forEach((path)=>{\n            this.set(...path)\n        })\n    }\n    batchGet(...paths){\n        return paths.map(path => this.get(...path));\n    }\n    batchHas(...paths){\n        return paths.map(path => this.has(...path));\n    }\n    batchDelete(...paths){\n        paths.forEach((path)=>{\n            this.delete(...path)\n        })\n    }\n    update(deltatime, delta){\n        if (this.isDestroyed)return;\n        this.customupdate(deltatime,delta);\n        Object.values(this.#scopes[`nodes`]).forEach((node)=>{\n            //let da = node.node.update({element:this,key:node})\n            if (!node.active)return;\n            let da = node.runNode(delta,...node.info);\n            if (!da)return;\n            Object.assign(node,da);\n        });\n    }\n    setToUi(){\n        if (this.#scopes[`properties`].inUi)return;\n        this.set(`properties/inUi`,true);\n        if (this.chunk) this.chunk.removeElement(this);\n        game.currentscene.uiList[this.id] = this;\n    }\n    removeFromUi(){\n        if (!this.#scopes[`properties`].inUi)return;\n        delete game.currentscene.uiList[this.id];\n        game.currentscene.addElement(this);\n    }\n    setup(){};customdestroy(){};customupdate(){};\n    constructor(properties,renderer,hitbox,...allNodes){\n        Object.assign(this.#scopes[`properties`],properties);\n        Object.assign(this.#scopes[`renderer`],renderer);\n        Object.assign(this.#scopes[`hitbox`],hitbox)\n        this.#scopes[`properties`].id = game.generateId();\n        this.setup();\n        \n        let setup = (typeof allNodes[allNodes.length-1] == `function`) ? allNodes.pop() : false;\n        //this.add(...allNodes);\n        \n        //this.add(...game.presets.system_presets.element);\n        this.#internal_setup();\n        if (setup)setup.call(this, allNodes.length, game.presets.system_presets.element.length);\n    }\n}\n\n*/","import {baseElement} from \"./internal/baseElement.js\";\nimport {nHan} from \"./internal/nodeHandler.js\";\nimport {nSea} from \"./internal/nodeSearcher.js\";\nimport {dHan} from \"./internal/dimeHandler.js\";\nimport { get_extension } from \"./internal/getExtension.js\";\nimport { script_handler } from \"./internal/scriptHandler.js\";\n\nexport class element extends \n\nscript_handler\n    (\n        dHan\n        (\n            //nSea\n            //(\n            //    nHan\n            //    (\n                    get_extension\n                    (\n                        baseElement\n                    )\n            //    )\n            //)\n        )\n    )\n    {\n    constructor(properties,renderer,hitbox,...allNodes){\n        super(properties,renderer,hitbox,...allNodes);\n    }\n}","export function\nscript_handler\n(\n    SUPER_CLASS\n)\n{\n    return class extends\n    SUPER_CLASS\n    {\n        // FUNCTIONS\n\n        use\n        (...scripts)\n        {\n            for \n            (let i in scripts)\n            {\n                if \n                (Array.isArray(scripts[i]))\n                {\n                    this.insert(...scripts[i]);\n                } \n                else \n                {\n                    this.insert(scripts[i]);\n                }\n            }\n        }\n    }\n}","import { game } from \"../../engine.js\";\nimport { utils } from \"../../utilities/utils.js\";\n\nexport function dHan(sCls){\n    return class extends sCls{\n        get dime(){\n            const r = this.system_get([`renderer`])\n            const p = this.system_get([`properties`])\n            if (p.ui){\n                return {\n                    x: Math.round(p.x+r.x)\n                    ,y: Math.round(p.y+r.y)\n                    ,width: Math.round(r.width)\n                    ,height: Math.round(r.height)\n                    ,radius: Math.round(r.radius)\n                    ,fontsize: r.fontsize\n                    ,rotation: r.rotation\n                }\n            }\n            const camera = game.currentscene.camera;\n            const tomappos = utils.tomap(p.x+r.x,p.y+r.y);\n            return {\n                x: Math.round(tomappos.x)\n                ,y: Math.round(tomappos.y)\n                ,width:Math.round(r.width/camera.zoom)\n                ,height:Math.round(r.height/camera.zoom)\n                ,radius:Math.round(r.radius/camera.zoom)\n                ,fontsize: r.fontsize/camera.zoom\n                ,rotation: r.rotation\n            }\n        }\n        get hitboxDime(){\n            let h = this.system_get([`hitbox`]);\n            return {\n                x: this.x+h.x\n                ,y: this.y+h.y\n                ,type: h.type\n                ,width: h.width\n                ,height: h.height\n                ,radius: h.radius\n                ,rotation: h.rotation\n            }\n        }\n    }\n}","import { game } from \"../../engine.js\";\n\nexport function \nget_extension\n(\n    SUPER_CLASS\n)\n{\n    return class extends \n    SUPER_CLASS \n    {\n\n        // VARIABLES\n\n\n        // FUNCTIONS\n\n        get color\n        ()\n        {\n            const rend = this.system_get([`renderer`]);\n            console.log(rend.color)\n            return game.utils.giveColorWithTables(rend.color,rend.transparency);\n        }\n\n        get x\n        ()\n        {\n            return this.system_get\n            (\n                [\n                    `properties`\n                    ,`x`\n                ]\n            );\n        }\n\n        get y\n        ()\n        {\n            return this.system_get\n            (\n                [\n                    `properties`\n                    ,`y`\n                ]\n            );\n        }\n\n        get chunk\n        ()\n        {\n            let c = this.system_get([`properties`]).chunk;\n            return game.currentscene.giveChunk(c.x,c.y);\n        }\n\n\n    }\n}","import { element } from \"../element/element.js\";\nimport { game } from \"../engine.js\";\n\nexport class entity extends element {\n    constructor(properties,renderer,hitbox,...allNodes){\n        super(properties,renderer,hitbox,...allNodes);\n    }\n    setup(){\n        let hI;\n        if(!this.get(`vitals`))this.set(`vitals`,{});\n        if (!this.get(`vitals/maxHealth`))this.set(`vitals/maxHealth`,100);\n        if (!this.get(`vitals/health`))this.set(`vitals/health`,100);\n        hI = this.getHealthInfo;\n        this.batchSet(\n            [`vitals/healthPercentage`,hI.health/hI.maxHealth]\n            ,[`vitals/lastDamaged`,null]\n            ,[`vitals/entitiesThatDamaged`,new Map()]\n            ,[`vitals/lastDamageDealtTo`,null]\n            ,[`vitals/lastDamageDealtAmount`,0]\n            ,[`vitals/entitiesKilled`,0]\n            ,[`vitals/entitiesThatThisDamaged`,new Map()]\n        );\n    }\n    get health(){\n        return this.get(`vitals/health`);\n    }\n    get healthPercentage(){\n        return this.get(`vitals/healthPercentage`)\n    }\n    get getHealthInfo(){\n        return {\n            health: this.health\n            ,maxHealth: this.get(`vitals/maxHealth`)\n            ,healthPercentage: this.healthPercentage\n            ,lastDamaged: this.get(`vitals/lastDamaged`)\n            ,entitiesThatDamaged: this.get(`vitals/entitiesThatDamaged`)\n        }\n    }\n    get getDamageInfo(){\n            return {\n                lastDamageDealtTo: this.get(`vitals/lastDamageDealtTo`)\n                ,lastDamageDealtAmount: this.get(`vitals/lastDamageDealtAmount`)\n                ,entitiesThatThisDamaged: this.get(`vitals/entitiesThatThisDamaged`)\n                ,entitiesKilled: this.get(`vitals/entitiesKilled`)\n            }\n    }\n    Damage(damage,entity){\n        if (!entity)return;else if(!entity.isElement)return;\n        const oldhealth = this.get(`vitals/health`);\n        const eid = entity.id;\n        const id = this.id;\n        this.set(`vitals/health`,oldhealth-damage);\n        this.set(`vitals/lastDamaged`,eid);\n        let hI = this.getHealthInfo;\n        this.set(`vitals/healthPercentage`,hI.health/hI.maxHealth);\n\n        if (!hI.entitiesThatDamaged.has(eid)){\n            let newMap = hI.entitiesThatDamaged;\n            newMap.set(eid,{\n                id: eid\n                ,times: 1\n                ,totalDamage: damage\n                ,lastDamage: damage\n            })\n        } else {\n            let newMap = hI.entitiesThatDamaged;\n            let oldMap = newMap.get(entity.id);\n            newMap.set(eid,{\n                id: eid\n                ,times: oldMap.times+1\n                ,totalDamage: ((oldMap.totalDamage)+damage)\n                ,lastDamage: damage\n            })\n            this.set(`vitals/entitiesThatDamaged`,newMap);\n        }\n\n        entity.set(`vitals/lastDamageDealtTo`,id);\n        entity.set(`vitals/lastDamageDealtAmount`,damage);\n        let dI = entity.getDamageInfo;\n        if (!dI.entitiesThatThisDamaged.has(id)){\n            let newMap = dI.entitiesThatThisDamaged;\n            newMap.set(id,{\n                id: id\n                ,times: 1\n                ,totalDamage: damage\n                ,lastDamage: damage\n            })\n        } else {\n            let newMap = dI.entitiesThatThisDamaged;\n            let oldMap = dI.entitiesThatThisDamaged.get(id);\n            newMap.set(id,{\n                id: id\n                ,times: oldMap.times+1\n                ,totalDamage: ((oldMap.totalDamage)+damage)\n                ,lastDamage: damage\n            })\n        }\n\n        if (damage>=oldhealth){\n            let amm = dI.entitiesKilled+1;\n            entity.set(`vitals/entitiesKilled`,amm);\n            entity.set(`vitals/entitiesKilledAmount`,dI.entitiesKilledAmount+1);\n            this.death();\n        };\n    }\n    dealDamage(damage,entity){\n        entity.Damage(damage,this);\n    }\n    death(){\n        const hI = this.getHealthInfo;\n        console.log(`${this.Name} has died to ${game.allElements[hI.lastDamaged].Name}!`)\n        this.destroy()\n    };\n    customdestroy(){\n        const id = this.id\n        let eTTD = this.get(`vitals/entitiesThatThisDamaged`);\n        let eTD = this.get(`vitals/entitiesThatDamaged`);\n        for (let [ki,vi] of eTTD){\n            let entity = game.allElements[vi.id];\n            let newMap = entity.get(`vitals/entitiesThatDamaged`);\n            newMap.delete(id);\n            entity.set(`vitals/entitiesThatDamaged`,newMap);\n        }\n        for (let [kv, vv] of eTD){\n            let entity = game.allElements.get(vv.id);\n            let newMap = entity.get(`vitals/entitiesThatThisDamaged`);\n            newMap.delete(id);\n            entity.set(`vitals/entitiesThatThisDamaged`,newMap);\n        }\n    }\n    customupdate(deltatime){\n\n    }\n}","import { utils } from \"../utilities/utils.js\";\n\nexport class eventNode{\n    #defaults = {\n        triggerTimes: 0\n        ,active: true\n        ,condition:function(){return true;}\n        ,trigger:function(){return true;}\n        ,Name:`eventNode`\n        ,tags:[]\n        ,path:[`properties/health`]\n        ,onApply:function(){}\n        ,onFinished:function(){}\n    }\n    constructor(Name, tags, path, condition, trigger, triggerTimes, onApply, onFinished){\n        if (typeof Name !== `object`){Name={Name, tags, path, condition, trigger, triggerTimes, onApply, onFinished};}\n        Object.assign(\n            this\n            ,{...this.#defaults}\n            ,Object.fromEntries(\n                Object.entries(Name).filter(([_, v]) => v !== undefined)\n            )\n        );\n        this.tags = utils.normalizePath(this.tags);\n        this.path = utils.normalizePath(this.path);\n        this.type = `eventNode`;\n    }\n}","import { game } from \"../../engine.js\";\nimport { eventNode } from \"../../events/eventNode.js\";\nimport { scene } from \"../../internal/scene.js\";\nlet en = eventNode;\n\nfunction urp(path,[ov,v]){ // update renderer property\n    let chunk = this.chunk;\n    if (!chunk)return;\n    this.system_set([`renderer`,path],ov);\n    chunk.removeElement(this);\n    this.system_set([`renderer`,path],v);\n    chunk.addElement(this);\n}\nfunction pc(type){ // position changed\n    let chunk = this.chunk;\n    if (!chunk)return;\n    let newchunk = game.currentscene.locateChunkByPos(this.x,this.y);\n    if (!newchunk)return;\n    if (chunk.pos[type]!=newchunk.pos[type]){\n        game.currentscene.moveElementToChunk(this,newchunk);\n    }\n}\n\nexport let system_presets = {\n    element: [\n        [new en(`xPositionChange`,[`system/presets/x/position/change`],[`properties/x`],undefined,function(){pc.call(this,`x`);})]\n        ,[new en(`yPositionChange`,[`system/presets/y/position/change`],[`properties/y`],undefined,function(){pc.call(this,`y`);})]\n        ,[new en(`colorChange`,[`system/presets/color`],[`renderer/color`],undefined,function(v){urp.call(this,`color`,v);})]\n        ,[new en(`transparencyChange`,[`system/presets/transparency`],[`renderer/transparency`],undefined,function(v){urp.call(this,`transparency`,v);})]\n        ,[new en(`uiOn`,[`ui/system/on`],[`properties/ui`],function(ov,v){return v;},function(){this.setToUi()})]\n        ,[new en(`uiOff`,[`ui/system/off`],[`properties/ui`],function(ov){return ov;},function(){this.removeFromUi()})]\n        ,[new en(`usesMouseChange`,[`system/input`],[`properties/usesMouse`],undefined,function(){let chunk = this.chunk;if(!chunk)return;game.currentscene.moveElementToChunk(this,chunk);})]\n    ]\n}","import { utils } from \"../utilities/utils.js\";\n\nexport class node{\n    #defaults = {\n        Name:`node`\n        ,tags:[]\n        ,onApply:function(){}\n        ,update:function(){}\n        ,onFinished:function(){}\n        ,type:`node`\n    }\n    constructor(Name, tags, update, onApply, onFinished){\n        if (typeof Name !== `object`){Name={Name, tags, update, onApply, onFinished, type:`node`};}\n        Object.assign(\n            this\n            ,{...this.#defaults}\n            ,Object.fromEntries(\n                Object.entries(Name).filter(([_, v]) => v !== undefined)\n            )\n        );\n        this.tags = utils.normalizePath(this.tags);\n        this.type = `node`;\n    }\n}","import { eventNode } from \"../../events/eventNode.js\";\nimport { node } from \"../../internal/node.js\";\nlet en = eventNode;\n\nlet mT = [`mouse`]\n\nfunction mouseFn(v,fn,...args){ // when the mouse leaves or enters\n    let call = fn.call(this,...args);\n    if (call){if(call.info)call.info.unshift(fn)};\n    return call;\n}\n\nfunction sumt(fn){ // sets uses mouse true\n    this.set(`properties/usesMouse`,true);\n    if (!fn){\n        return {info:[function(){}]}\n    }\n}\n\nfunction rfum(){ // removes from uses mouse\n    if (this.searchForEventNodeByTag(mT).length<=0){\n        this.set(`properties/usesMouse`,false);\n    }\n}\n\n/*\n\nfunction makeItWork(element, ){\n\n}\n\nDragging: new en({\n    condition(ov,v){\n        return v; \n    }\n    trigger(v,...args){\n        this.do(\n            new game.node({\n                update:mouseFn\n            }\n            ,...args\n        )\n    }\n})\n\n\n*/\n\nlet mainDrag = new node({\n    update(delta, fn, ...args){\n        fn.call(this, ...args)\n    }\n})\n\n\nfunction rpths(path){ // returns paths\n    return {\n        Down: new en(`mouseDown`,[`mouse/presets/down/${path}`],[`mouse/${path}/down`],rv,...mE)\n        ,Up: new en(`mouseUp`,[`mouse/presets/up/${path}`],[`mouse/${path}/down`],rov,...mE)\n        ,Dragging: new en({\n            path:[`mouse/${path}/dragging`]\n            ,condition:rv\n            ,trigger(){\n                this.do(\n\n                )\n            }\n            ,onApply:sumt\n            ,onFinished:rfum\n        })\n    }\n}\n\nfunction rv(ov,v){return v;} // return value\nfunction rov(ov){return ov;} // return old value(reversed)\n\nlet mE = [mouseFn,0,sumt,rfum] // main functions\n\nexport let mouse = {\n    Enters: new en(`mouseEntered`,[`mouse/presets/entered`],[`mouse/over`],rv,...mE)\n    ,Leaves: new en(`mouseLeft`,[`mouse/presets/left`],[`mouse/over`],rov,...mE)\n    ,Left:rpths(`left`)\n    ,Right:rpths(`right`)\n    ,Middle:rpths(`middle`)\n}","import { node } from \"../../internal/node.js\";\nimport { utils } from \"../../utilities/utils.js\";\n\nexport let effect = class {\n    node;\n    constructor(Name,tags,onApply,update,onFinished){\n        this.node = new node(Name,tags,onApply,update,onFinished);\n        this.Name = this.node.Name;\n        this.tags = this.node.tags;\n        this.type = this.node.type;\n    }\n    onApply(time=1, ...info){\n        time*=60//utils.tosec(time)*1000/16.6666;\n        let app = this.currentNode.node.node.onApply.call(this,...info);\n        if (app){\n            if (!app.info){app.info=[];}\n            app.info = [time,...app.info]\n            return app;\n        };\n        return {info:[time,...info]};\n    }\n    update(delta, time,...info){\n        if (time<=0){\n            this.remove();\n            return;\n        }\n        time-=delta;\n        let upd = this.currentNode.node.node.update.call(this, delta, ...info);\n        if (upd){\n            if (!upd.info){upd.info=[];}\n            upd.info = [time,...upd.info];\n            return upd;\n        }\n        return {info:[time,...info]};\n    }\n    onFinished(time,...info){\n        let fin = this.currentNode.node.node.onFinished.call(this,...info);\n        if (fin){\n            if (!fin.info){fin.info=[]};\n            fin.info = [time,...fin.info];\n            return fin;\n        }\n    }\n}","import { eventNode } from \"../../events/eventNode.js\";\nimport { utils } from \"../../utilities/utils.js\";\nlet en = eventNode;\n\nlet Links = {\n    arc:\n    [\n        new en({\n            path:[`renderer/radius`]\n            ,tags:[`arc`]\n            ,trigger:function([ov,v]){\n                this.system_set(`hitbox/radius`,v);\n            }\n            ,onApply:function(){\n                this.set(`hitbox/radius`,this.system_get([`renderer`,`radius`]));\n            }\n        })\n    ]\n    ,box:\n    [\n        new en({\n            path:[`renderer/width`]\n            ,tags:[`box`]\n            ,trigger:function([ov,v]){\n                this.set(`hitbox/width`,v);\n            }\n            ,onApply:function(){\n                this.set(`hitbox/width`,this.system_get([`renderer`,`width`]));\n            }\n        })\n        ,new en({\n            path:[`renderer/height`]\n            ,tags:[`box`]\n            ,trigger:function([ov,v]){\n                this.set(`hitbox/height`,v);\n            }\n            ,onApply:function(){\n                this.set(`hitbox/height`,this.system_get([`renderer`,`height`]));\n            }\n        })\n    ]\n    ,txt:\n    [\n        new en({\n            path:[`renderer/string`]\n            ,tags:[`txt`]\n            ,trigger:function([ov,v]){\n                let rend = this.system_get([`renderer`]);\n                let length = utils.measureText(v,rend);\n                this.set(`hitbox/width`,length);\n                this.set(`hitbox/height`,rend.fontsize);\n            }\n            ,onApply:function(){\n                let rend = this.system_get([`renderer`]);\n                let length = utils.measureText(rend.string,rend);\n                this.set(`hitbox/width`,length);\n                this.set(`hitbox/height`,rend.fontsize);\n            }\n        })\n    ]\n}\n\nlet Base = [\n    new en({\n        path:[`renderer/rotation`]\n        ,trigger:function([ov,v]){\n            this.set(`hitbox/rotation`,v);\n        }\n        ,onApply:function(){\n            this.set(`hitbox/rotation`,this.system_get([`renderer`,`rotation`]));\n        }\n    })\n    ,new en({\n        path:[`renderer/x`]\n        ,trigger:function([ov,v]){\n            this.set(`hitbox/x`,v);\n        }\n        ,onApply:function(){\n            this.set(`hitbox/x`,this.system_get([`renderer`,`x`]));\n        }\n    })\n    ,new en({\n        path:[`renderer/y`]\n        ,trigger:function([ov,v]){\n            this.set(`hitbox/y`,v);\n        }\n        ,onApply:function(){\n            this.set(`hitbox/y`,this.system_get([`renderer`,`y`]));\n        }\n    })\n]\n\nexport let linkHitboxToRenderer = \n[\n    new en({\n        path:[`renderer/type`]\n        ,tags:[`linkHitboxToRenderer`]\n        ,trigger:function([ov,v]){\n            this.set(`hitbox/type`,v);\n            this.remove(...this.anyNodeByTag(ov));\n            this.add(...Links[v]);\n        }\n        ,onApply:function(){\n            let rType = this.system_get([`renderer`,`type`]);\n            this.set(`hitbox/type`,rType);\n            this.add(...Base);\n            this.add(\n                ...Links[rType]\n            )\n        }\n    })\n]","export class script {\n    #defaults = {\n        fired:function(){}\n        ,signal: `script`\n    }\n    constructor(configuration){\n        Object.assign(this,this.#defaults,configuration,{type:`script`});\n    }\n}","import { script } from \"../../../../systems/v9/script.js\";\nimport { utilities } from \"../../../../systems/v9/utilities.js\";\n\nconst convert = utilities.system_signal_converter;\nconst EVENT_SCRIPT_DEFAULTS = \n{\n    path: `properties/x`\n    ,fired(){}\n    ,on_insert(){}\n    ,on_removal(){}\n    ,detect: `set`\n}\n\nexport class event extends script\n{\n    constructor\n    (\n        path = `properties/x`\n        ,fired_function = function(){}\n        ,on_insert_function = function(){}\n        ,on_removal_function = function(){}\n        ,detect = `set`\n    )\n    {\n        let raw_path;\n        let raw_detect;\n        let rest = {};\n        if (typeof path === `object`)\n        {\n            ({path: raw_path, detect: raw_detect, ...rest} = \n            {\n                ...EVENT_SCRIPT_DEFAULTS\n                ,...path\n            })\n        }\n        else\n        {\n            raw_path = path;\n            raw_detect = detect\n            rest = \n            {\n                fired: fired_function\n                ,on_insert: on_insert_function\n                ,on_removal: on_removal_function\n                ,event_node: true\n            }\n        }\n\n        super\n        (\n            {\n                ...rest\n                ,signal: convert(raw_path, raw_detect)\n            }\n        );\n\n    }\n}","import { script } from \"../../../../systems/v9/script.js\";\n\nconst FRAME_SCRIPT_DEFAULTS = \n{\n    fired_function(){}\n    ,on_insert_function(){}\n    ,on_removal_function(){}\n    ,detect: `update`\n}\n\nexport class frame extends script\n{\n    constructor\n    (\n        fired_function = function(){}\n        ,on_insert_function = function(){}\n        ,on_removal_function = function(){}\n        ,detect = `update`\n    )\n    {\n        let raw_detect;\n        let rest;\n        if (typeof fired_function === `object`)\n        {\n            (\n                {detect: raw_detect, ...rest} = \n                {\n                    ...FRAME_SCRIPT_DEFAULTS\n                    ,...fired_function\n                }\n            )\n        }\n        else\n        {\n            raw_detect = detect;\n            rest = \n            {\n                fired: fired_function\n                ,on_insert: on_insert_function\n                ,on_removal: on_removal_function\n                ,detect\n            }\n        }\n        super\n        (\n            {\n                ...rest\n                ,signal: `-u$${raw_detect[0]}`\n            }\n        )\n    }\n}","import * as event from \"./internal/event.js\";\nimport * as frame from \"./internal/update.js\";\n\nexport const scripts = {\n    ...event\n    ,...frame\n}","import * as system_presets from \"./internal/system_presets.js\";\nimport * as mouse from \"./internal/mouse.js\";\nimport * as effect from \"./internal/effect.js\";\nimport * as linkHitboxToRenderer from \"./internal/linkHitboxToRenderer.js\";\nimport * as scripts from \"./internal/scripts/script.js\";\n\n\nexport let presets = {\n    ...system_presets\n    ,...mouse\n    ,...effect\n    ,...linkHitboxToRenderer\n    ,...scripts\n}","import { Game } from \"./internal/game.js\";\nexport let game = new Game()\ngame.begin();","import { Canvas } from \"./canvas.js\"\nimport { events } from \"../events/events.js\";\nimport { scene } from \"./scene.js\";\nimport { frame } from \"./frame.js\";\nimport { element } from \"../element/element.js\";\nimport { entity } from \"../classes/entity.js\";\nimport { eventNode } from \"../events/eventNode.js\";\nimport { presets } from \"../presets/presets.js\";\nimport { node } from \"./node.js\";\nimport { utils } from \"../utilities/utils.js\";\nimport { script } from \"../systems/v9/script.js\"\n\nexport class Game{\n    idList = {};\n    Canvas = new Canvas();\n    canvas = this.Canvas.canvas\n    ctx = this.Canvas.ctx;\n    time = 0;\n    eventNode = eventNode;\n    node = node;\n    presets = presets;\n    utils = utils;\n    script = script;\n    mouse = {\n        x: 0\n        ,y: 0\n        ,filteredX: 0\n        ,filteredY: 0\n        ,isover: false\n    }\n    scenes = {};\n    allElements = {};\n    window = {width:window.innerWidth,height:window.innerHeight};\n    constructor(){\n        let game = this;\n        this.element = class extends element{\n            constructor(properties,renderer,hitbox,...allNodes){\n                super(properties,renderer,hitbox,...allNodes);\n                game.addElement(this);\n            }\n        }\n        this.entity = class extends entity{\n            constructor(properties,renderer,hitbox,...allNodes){\n                super(properties,renderer,hitbox,...allNodes);\n                game.addElement(this);\n            }\n        }\n    }\n    generateId = function(length = 28){\n        const chars = `abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890-=+_|!@#$%^&*()<>`;\n        let result = ``;\n        for (let i=0; i<length-4; i++){\n            result+=chars.charAt(Math.floor(Math.random()*chars.length));\n        }\n        if (this.idList[result]){\n            console.log(`Damn lucky day! `, result);\n            result = this.generateId(length);\n        }\n        let gen = Math.floor(Math.random()*(result.length+1));\n        result = result.slice(0, gen) + 'gen-' + result.slice(gen);\n        this.idList[result] = true;\n        return result;\n    }\n    begin(){\n        this.events = new events(this);\n        this.addScene(`Main`);\n        frame();\n    }\n    addScene(Name){\n        if (this.scenes[Name])console.warn(`STOP PUTTING SCENES WITH THE NAME ${Name}!!!`);\n        this.currentscene = new scene(Name);\n        this.scenes[Name] = this.currentscene;\n    }\n    callScene(Name){\n        if (!this.scenes[Name]){\n            console.warn(`NO SCENE WITH THE NAME ${Name}!!!`);\n            return;\n        }\n        this.currentscene = this.scenes[Name];\n    }\n    addElement(element){\n        this.allElements[element.id] =  element;\n        this.currentscene.addElement(element);\n    }\n    removeElement(element){\n        delete this.allElements[element.id];\n        this.currentscene.removeElement(element);\n    }\n}"],"names":["Canvas","constructor","this","canvas","document","createElement","style","position","width","window","innerWidth","height","innerHeight","left","top","ctx","getContext","textAlign","body","insertBefore","childNodes","toradians","degrees","Math","PI","x1","y1","x2","y2","sqrt","x","y","rotation","xorigin","yorigin","newpos","cos","sin","value","fn","ts","camera","game","currentscene","chunk","i","show","v","ifChunk","giveChunk","zoom","path","newpath","Array","isArray","forEach","newstr","split","filter","s","length","push","utils","math","color","transparency","size","type","text","renderer","font","givefont","fontsize","fonttype","fontstyle","measureText","paths","events","addEventListener","resize","keyboard","mousemove","mousedown","mouseup","preventRight","event","preventDefault","info","key","mouse","isover","Object","values","uiList","ifover","set","get","unmap","filteredX","filteredY","aroundChunk","c_info","mouseElements","cursor","lor","button","system_set","scene","pos","chunkSize","allElements","elements","renderChunk","addElement","element","id","colormap","removeElement","keys","update","deltatime","delta","render","fillStyle","beginPath","closePath","fill","addCamera","locateChunkByPos","chunkpos","mychunkpos","Name","chunks","moveElementToChunk","newchunk","insertChunk","newX","floor","newY","setToUi","frame","timestamp","time","clearRect","requestAnimationFrame","types","static","dime","roundRect","hd","rotatepoint","arc","radius","distance","fillText","string","hb","idList","utilities","result","charAt","chars","random","generateId","gen","slice","normalize_path","part","replaceAll","system_signal_converter","signal","join","ctxUse","script","module","args","set_context","call","proto","remove_context","assign","base_module","context","files","scripts_storage","signals_storage","pop","oldValue","current","system_delete","undefined","system_get","normalized_path","change","emit","config","scripts","insert","module$1","sCls","stored_script","run","remove","script_handler","FILE_VALUE_DEFAULTS","properties","ui","inUi","roundedness","hitbox","reactions","reactionsList","nodes","over","dragging","right","middle","baseElement","save","translate","rend","restore","has","system_has","normalizePath","deep_cloned_defaults","structuredClone","super","possible_initilization","use","SUPER_CLASS","r","p","round","tomappos","tomap","hitboxDime","h","dHan","giveColorWithTables","c","get_extension","allNodes","entity","setup","hI","getHealthInfo","batchSet","health","maxHealth","Map","healthPercentage","lastDamaged","entitiesThatDamaged","getDamageInfo","lastDamageDealtTo","lastDamageDealtAmount","entitiesThatThisDamaged","entitiesKilled","Damage","damage","isElement","oldhealth","eid","newMap","oldMap","times","totalDamage","lastDamage","dI","entitiesKilledAmount","death","dealDamage","destroy","customdestroy","eTTD","eTD","ki","vi","delete","kv","vv","customupdate","eventNode","defaults","triggerTimes","active","condition","trigger","tags","onApply","onFinished","fromEntries","entries","_","en","urp","ov","pc","system_presets","removeFromUi","node","mT","sumt","rfum","searchForEventNodeByTag","rpths","Down","rv","mE","Up","rov","Dragging","do","unshift","Enters","Leaves","Left","Right","Middle","app","currentNode","upd","fin","Links","box","txt","Base","linkHitboxToRenderer","anyNodeByTag","add","rType","fired","configuration","convert","EVENT_SCRIPT_DEFAULTS","on_insert","on_removal","detect","fired_function","on_insert_function","on_removal_function","raw_path","raw_detect","rest","event_node","FRAME_SCRIPT_DEFAULTS","presets","effect","scenes","begin","addScene","callScene"],"mappings":"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"}